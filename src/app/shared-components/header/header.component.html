<header>
  <section [ngClass]="{ 'padding-left-34': showSearchBar }" class="header-left" routerLink="/login">
    <img class="logo" src="../../assets/img/da_bubble_logo.png" alt="da_bubble_logo" />
    <span>DABubble</span>
  </section>

  @if(showSearchBar){
  <div class="header-center">
    @if (showSearchBar) {
    <section class="search-bar">
      <div class="search-bar-input-container">
        <input (keyup)="searchDevspace()" ngModel [(ngModel)]="searchTerm" class="search-bar-input"
          placeholder="Devspace durchsuchen" type="text" />
        <div class="search-bar-input-icon-container">
          <img class="search-bar-input-icon-hover" src="./../../assets/img/search_icon.png" alt="search_icon" />
        </div>
      </div>
    </section>


    @if(showMessagesDropdown){
    <div class="drop-down-div">
      <div class="scroll-div">

        @for (result of searchResults; track $index) {

        <!-- <div (click)="setActiveChannel(channel)"></div> -->
        <div class="userList" (click)="setActiveChannel(result.channel)">
          <b>{{result.channel.name}}'</b>
          <div>
            {{result.senderName}}:
            {{result.messageText}}
          </div>

        </div>


        }

        <!-- @for (channel of filteredChannels; track $index) {
                  <div class="channel-title-div">
                      <div class="channel-title-container" (click)="setReceiver(channel)">
                          <img src= './../../../../assets/img/tag2.png'>
                          <span class="channel-title">{{channel.name}}</span>
                      </div>
                  </div>
              } -->
      </div>
    </div>
    }
    @if(showUsersDropdown){
    <div class="drop-down-div">
      <div class="scroll-div">
        @for (user of searchedUsers; track $index) {
        <div class="userList" (click)="setActiveChat(user)">
          <img src="{{user.avatar}}" alt="" class="user-img">
          <div>
            {{user.firstName}}
            {{user.lastName}}
          </div>

        </div>
        }
      </div>
    </div>
    }







    } @if (showUserProfile) {
    <section (click)="toggleUserMenu()" class="user-header-menu">
      <span>{{ user?.firstName }} {{ user?.lastName }}</span>
      <div class="user-avatar-wrapper">
        <img class="user-avatar" [src]="getAvatarBaseName(user?.avatar)" alt="user_avatar" />
        <span [ngClass]="{ online: user?.isOnline, offline: !user?.isOnline }" class="online-status"></span>
      </div>

      <img class="drop_down_arrow" src="./../../../assets/img/drop_down_arrow.png" alt="" />
    </section>

    }
  </div>
  } @if (showRegistrationLink) {
  <section class="header-right">
    <span>Neu bei DABubble ?</span>
    <a class="primary-href" routerLink="/registration">Konto erstellen</a>
  </section>

  }
</header>

@if(isUserMenuOpen){
<div (click)="toggleUserMenu()" class="dialog-bg">
  <app-header-user-dialog (userProfileOpened)="openUserProfile($event)"></app-header-user-dialog>
</div>

} @if(isUserProfileOpen){
<div (click)="closeUserProfile()" class="dialog-bg">
  <app-user-profile (closeProfile)="closeUserProfile()" [userId]="selectedUserId"></app-user-profile>
</div>
}