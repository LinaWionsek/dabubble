<section class="user-profile" (click)="$event.stopPropagation()">
  <header>
    <span>Profil</span>
    <div (click)="onClose()" class="icon-container">
      <img  src="../../../assets/img/close.png" alt="close" />
    </div>
  </header>

  <section class="user-avatar">
    <img [src]="user?.avatar" alt="user-avatar" />
  </section>

  @if(!isEditing) {
  <section class="user-info">
    <div class="user-info-wrapper">
      <span class="user-name">
        {{ user?.firstName }} {{ user?.lastName }}
      </span>
      <div class="user-online-status-wrapper">
        <span
          [ngClass]="user?.isOnline ? 'online' : 'offline'"
          class="user-online-status-dot"
        ></span>
        <span
          [ngClass]="user?.isOnline ? 'online' : 'offline'"
          class="user-online-status-text"
          >Aktiv</span
        >
      </div>
    </div>

    @if(isOwnProfile && !isEditing) {
    <span (click)="toggleEdit()" class="edit-user"> Bearbeiten </span>
    }
  </section>
  } @if(!isEditing) {
  <section class="user-email-address">
    <header>
      <img src="../../../assets/img/mail_icon_bold.png" alt="mail_icon_bold" />
      <span>E-Mail-Adresse</span>
    </header>
    <a [attr.href]="'mailto:' + user?.email" class="user-email">{{
      user?.email
    }}</a>
  </section>

  } @if(isEditing) {
  <section class="user-edit-container">
    <div class="user-edit-wrapper">
      <div class="user-edit-name-input-header">
        <img
          src="../../../assets/img/user_icon_bold.png"
          alt="user_icon_bold"
        />
        <span>Vollständiger Name</span>
      </div>

      <div class="auth-input-container">
        <input
          class="auth-input"
          type="text"
          [placeholder]="user ? user.firstName + ' ' + user.lastName : ''"
          [(ngModel)]="userEditfullName"
          name="fullName"
          #userEditfullNameInput="ngModel"
          required
          pattern="[a-zA-ZÀ-ž\s\-]+"
        />
        <img
          class="auth-input-icon"
          src="./../../assets/img/user_icon.png"
          alt="user_icon"
        />
        <span
          class="invalid-input"
          [class.is-invalid]="
            userEditfullNameInput.invalid &&
            userEditfullNameInput.touched &&
            userEditfullNameInput.value != ''
          "
        >
          Dieser Name ist leider ungültig.
        </span>
      </div>
    </div>

    <div class="user-edit-wrapper">
      <div class="user-edit-name-input-header">
        <img
          src="../../../assets/img/mail_icon_bold.png"
          alt="user_icon_bold"
        />
        <span>E-Mail-Adresse</span>
      </div>

      <div class="auth-input-container">
        <input
          class="auth-input"
          type="text"
          [placeholder]="user ? user.email : ''"
          [(ngModel)]="userEditEmail"
          name="userEditEmail"
          #userEditEmailInput="ngModel"
          required
          email
        />
        <img
          class="auth-input-icon"
          src="./../../assets/img/mail_icon.png"
          alt="user_icon"
        />
        <span
          class="invalid-input"
          [class.is-invalid]="
            userEditEmailInput.invalid &&
            userEditEmailInput.touched &&
            userEditEmailInput.value != ''
          "
        >
          Diese E-Mail-Adresse ist leider ungültig.
        </span>
      </div>
    </div>

    <div class="user-edit-button-container">
      <button (click)="toggleEdit()" class="secondary-button">Abbrechen</button>
      <button (click)="saveEditingChanges()" class="primary-button">Speichern</button>
    </div>
  </section>
  }
</section>
