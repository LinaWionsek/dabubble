@if(message.senderId === currentUser?.id){
    <div class="message-container" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
        <div class="message-div">
            <div class="message-div-header">
                <span class="time-span">{{ formatMessageTime(message.timeStamp) }} Uhr</span>
                <span class="name-span">{{ message.senderName }}</span>
            </div>

            @if(editingMessage){
                <div class="edit-msg-div">
                    <textarea [(ngModel)]="message.messageText"></textarea>
                    <div class="edit-msg-div-footer">
                        <div class="action-icon-container">
                            <img src="./../../../assets/img/emoji_reaction.png" class="emoji-img">
                        </div>
                        <div class="btn-container">
                            <button class="cancel-btn" (click)="cancelEditing()">Abbrechen</button>
                            <button class="save-btn" (click)="updateMessage()">Speichern</button>
                        </div>
                    </div>
                </div>
            } @else {
                <div class="message-text-div">{{ message.messageText }}</div>
                <div class="message-div-footer">
                    @for (reactionType of groupedReactions | keyvalue; track $index) {
                        <div class="reaction-div" (click)="addReaction(reactionType.key)">
                            <img [src]="'/assets/img/emojis/' + reactionType.key + '.png'">
                            <span class="reaction-count-span"> {{ reactionType.value.length }} </span>
                        </div>

                    }
                    <div class="add-reaction-icon-container">
                        <img src="./../../../assets/img/add_reaction.png" class="add-reaction-icon">
                    </div>
                </div>
            }
            
        </div>
    
        <div class="profile-img-div">
            <img [src]="message.senderAvatar" class="profile-img">
        </div>
    
    
    
        @if(!editingMessage){
            <div class="message-options-div">
                <div class="emoji-div icon-container" (click)="addReaction('tick')">
                    <img src="./../../../assets/img/emojis/tick.png">
                </div>
                <div class="emoji-div icon-container" (click)="addReaction('hands_up')">
                    <img src="./../../../assets/img/emojis/hands_up.png">
                </div>
                <div class="icon-container">
                    <img src="./../../../assets/img/add_reaction.png">
                </div>
                <div class="icon-container">
                    <img src="./../../../assets/img/comment.png">
                </div>
                <div class="icon-container more" (click)="showEditMessageBtn()">
                    <img src="./../../../assets/img/more_vert.png" alt="">
    
                    @if(editMessageBtnVisible){
                        <div class="edit-msg-btn-div">
                            <button class="edit-msg-btn" (click)="editMessage()">Nachricht bearbeiten</button>
                            <button class="edit-msg-btn" (click)="deleteMessage()">Nachricht l√∂schen</button>
                        </div>
                    }
                </div>
            </div>
        }
        

    </div>
    
} @else {

    <div class="received message-container">
        <div class="received profile-img-div">
            <img [src]="message.senderAvatar" class="profile-img">
        </div>
    
        <div class="received message-div">
            <div class="received message-div-header">
                <span class="name-span">{{ message.senderName }}</span>
                <span class="received time-span">{{ formatMessageTime(message.timeStamp) }} Uhr</span>
            </div>
            <div class="received message-text-div">{{ message.messageText }}</div>
            <div class="received message-div-footer">
                @for (reactionType of groupedReactions | keyvalue; track $index) {
                    <div class="reaction-div" (click)="addReaction(reactionType.key)">
                        <img [src]="'/assets/img/emojis/' + reactionType.key + '.png'">
                        <span class="reaction-count-span"> {{ reactionType.value.length }} </span>
                    </div>

                }
                <div class="add-reaction-icon-container">
                    <img src="./../../../assets/img/add_reaction.png" class="add-reaction-icon">
                </div>
                <span class="answers-count">2 Antworten</span>
                <span class="last-answer-time">Letzte Antwort 14:56</span>
            </div>
        </div>
    
        
    
        <div class="received message-options-div">
            <div class="emoji-div icon-container">
                <img src="./../../../assets/img/emojis/tick.png" alt="">
            </div>
            <div class="emoji-div icon-container">
                <img src="./../../../assets/img/emojis/hands_up.png" alt="">
            </div>
            <div class="icon-container">
                <img src="./../../../assets/img/add_reaction.png" alt="">
            </div>
            <div class="icon-container">
                <img src="./../../../assets/img/comment.png" alt="">
            </div>
        </div>
    </div>



}




